<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>SNC Admin</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Cabin|Oswald:500" rel="stylesheet">
  <style>
    .sticky {
      bottom: 10px;
      position: fixed;
    }

    .btn-holder {
      padding-top: 30%;
      justify-content: center;
      display: flex;
    }
  </style>
</head>

<body>

  <div class="container-fluid" id="top">

    <div class="row">
      <div class="col-12">
        <div class="float-left">
          <a href="admin/#top"><img class="sticky" src="admin/assets/up.ico" width="35px"></a>
        </div>
        <div class="jumbotron">
          <h1 class="text-center">Security-N-Compliance<br />Design Document</h1>
          <br />
          <div class="row">
            <div class="container">
              <div class="d-flex text-center">
                <div class="col-1">
                </div>
                <div class="col-2">
                  <br /><br />
                  <h5><a href="admin/#Architecture">Architecture</a></h5>
                </div>
                <div class="col-2">
                  <br /><br />
                  <h5><a href="admin/#Code">Code Repositoty</a></h5>
                </div>
                <div class="col-2">
                  <br /><br />
                  <h5><a href="admin/#Data">Data Definitions</a></h5>
                </div>
                <div class="col-2">
                  <br /><br />
                  <h5><a href="admin/#Design">Design Rationale</a></h5>
                </div>
                <div class="col-2">
                  <br /><br />
                  <h5><a href="admin/tutorials/">Tutorials</a></h5>
                </div>
                <div class="col-1">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">

          <table class="table">

            <tbody>
              <tr>
                <th scope="row">
                  <h3 class="text-center" id="Architecture">Architecture</h3>
                  <br />
                  <div class="text-center content-justify-center">
                    <p>Click on image to view in a new tab</p>
                    <a href="admin/assets/SoftwareArchitecture.png" target="_blank"><img src="admin/assets/SoftwareArchitecture.png" width="50%" alt="Software Architecture"></a>
                  </div>

                </th>

              </tr>
              <tr>
                <th scope="row">
                  <h3 class="text-center" id="Code">Code Repository</h3>
                  <br />
                  <div class="container">
                    <br />
                    <h4 id="getting-started" class="text-center">Getting Started</h4>
                    <p>Steps below to walk you through necessary downloads, installations, and setup</p>
                    <br />
                    <br />
                    <h4 id="introduction" class="text-center">Introduction</h4>
                    <p>This project is divided into two parts: 1. the <a target="_blank" href="https://nodejs.org/en/">Node.js</a>, <a target="_blank" href="https://www.mongodb.com/download-center/community">MongoDB</a>, and <a target="_blank" href="https://expressjs.com/">Express</a>
                      back-end 2.
                      the <a target="_blank" href="https://angular.io/">Angular</a> front-end</p>
                    <p>The app is hosted on <a target="_blank" href="https://heroku.com">Heroku</a> and can be viewed <a target="_blank" href="https://security-n-compliance.herokuapp.com">Here</a></p>
                    <br />
                    <h4 id="downloads" class="text-center">Downloads</h4>
                    <br />
                    <h5 id="git">Git</h5>
                    <p>First, register for a GitHub account if you haven't already. Git is a repository service that helps keep track of updates, issues, and project contributors. Install Git on your computer <a target="_blank" href="https://git-scm.com/downloads">Here</a></p>
                    <br />
                    <h5 id="node.js-and-npm">Node.js and NPM</h5>
                    <p>Node.js is a javascript runtime, which allows us to compile and run both the code and the dependencies. NPM (Node Package Manager) organizes our project packages (dependencies).</p>
                    <p>Install Node.js through the installation package <a target="_blank" href="https://nodejs.org/en/">Here</a>. Once installed, open the command prompt (Windows) or terminal (Mac OSX) to run</p>
                    <p><code>node -v</code></p>
                    <p>and</p>
                    <p><code>npm -v</code></p>
                    <p>to confirm that both NPM and Node.js were correctly installed and set as environmental variables on your system.</p>
                    <p>Then, use NPM to install Nodemon globally <code>npm install -g nodemon</code>. Nodemon eases the development process by automatically refreshing your local Node server every time a change is saved.</p>
                    <br />
                    <h5 id="mongodb">MongoDB</h5>
                    <p>MongoDB is a NoSQL database system that stores entries as documents that are then organized in collections. MongoDB returns requests as JSON, making it easier to parse with Node.js and Angular.</p>
                    <p>To install MongoDB, follow the link <a target="_blank" href="https://www.mongodb.com/download-center/community">Here</a>. Once the installation is complete, return to your terminal and run <code>mongod</code> to start a
                      database server
                      locally. The data persists when the server is closed - don't worry about running and terminating the server often.</p>
                    <br />
                    <h5 id="angular">Angular</h5>
                    <p>Angular is the front-end framework used for this project. Unlike the Node.js back-end, Angular is programmed in TypeScript, which compiles down to JavaScript. TypeScript helps write neater code by keeping variables statically
                      typed. To download Angular, go to your terminal and run</p>
                    <pre><code>npm install -g @angular/cli</code></pre>
                    <p>This will install the Angular client and create a new path variable. To confirm proper installation, run <code>ng v</code></p>
                    <br />
                    <h4 id="getting-the-project" class="text-center">Getting The Project</h4>
                    <p>After installing Node.js, MongoDB, and Angular, open the terminal window and clone this repository by running <code>git clone https://github.com/MatthewFrisby/523-Project.git</code></p>
                    <p>Change directories by running <code>cd 523-Project</code></p>
                    <p>Now you are in the project folder!</p>
                    <p>few more installations are necessary before you can launch the development servers. In the 523-Project folder in your terminal, run <code>npm i</code>. This will install all the required dependencies for the Node.js server.
                      Next, change directories again by navigating to the SNC-FE folder and calling <code>cd SNC-FE</code>. Rerun <code>npm i</code> to install the front-end dependencies. Now you are ready to launch the development servers!</p>
                    <p>To launch the servers, open three separate terminal windows. For two of the windows, I recommend using your file explorer to navigate to SNC-FE and back-end portions of the project. Right-click in each folder and select
                      &quot;Git Bash Here&quot; to open the Git Bash window in that directory. The third terminal window can be opened anywhere.</p>
                    <p>Follow these commands IN ORDER:</p>
                    <ol style="list-style-type: decimal">
                      <li>In your third terminal window (the miscellaneous window), run the command <code>mongod</code> and wait until it reads &quot;waiting for connection on port...&quot;</li>
                      <li>If it is your first time deploying the application locally, you will need to seed your mongo database by running <code>node &quot;Script Stuff/script.js&quot;</code>. This will seed your database with the SAQ questions and
                        templates as well as make a superuser with the email as &quot;admin&quot; and password as &quot;password&quot;</li>
                      <li>Then, move to the terminal for the back-end and run <code>nodemon server</code>. This will start your Node.js server.</li>
                      <li>The last step is to go to the SNC-FE terminal and run <code>ng serve</code> to start your Angular development server.</li>
                    </ol>
                    <p>Once complete, open your browser and go to <a target="_blank" href="http://localhost:4200">http://localhost:4200</a> to see Security-N-Compliance.</p>
                    <br />
                    <h5 id="additional-notes" class="text-center">Additional Notes</h5>
                    <ol style="list-style-type: decimal">
                      <li>
                        <p>Your browser may try to open <a target="_blank" href="http://localhost:3000">http://localhost:3000</a> with what looks like http://localhost:4200 but what you are actually seeing on http://localhost:3000 is the completely
                          built
                          application. Any changes made will not appear there. To update the built application, go to the SNC-FE folder in the terminal and run <code>ng build --prod</code> to update.</p>
                      </li>
                      <li>
                        <p>Because of Cross-Origin Resource Sharing (CORS) restrictions, you might have trouble logging into the angular application. To login you first need to attempt to do so with the login form. This will technically work but to
                          recieve the cookie for further access you will need to open http://localhost:3000 in another window and then run this command in your developer console:</p>
                        <pre><code>fetch(&#39;http://localhost:3000/api/login&#39;, {
  method: &#39;POST&#39;,
  body: JSON.stringify({
   email: &#39;admin&#39;,
   password: &#39;password&#39;
}),
  headers: {
    &#39;Content-type&#39;: &#39;application/json; charset=UTF-8&#39;
  }
})
.then(res =&gt; res.json())
.then(console.log)</code></pre>
                      </li>
                    </ol>
                    <h4 id="editing" class="text-center">Editing</h4>
                    <p>Suggested editor for working on this application is Atom. You can log in to Git through Atom and make all Git commands in the window, but feel free to use your editor of choice.</p>
                    <h4 id="resources-and-documentation" class="text-center">Resources and Documentation</h4>
                    <div class="text-center">
                      <p><a target="_blank" href="https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf">Git</a></p>
                      <p><a target="_blank" href="https://nodejs.org/en/docs/">Node.js</a></p>
                      <p><a target="_blank" href="https://docs.npmjs.com/">NPM</a></p>
                      <p><a target="_blank" href="https://expressjs.com/en/guide/routing.html">Express</a></p>
                      <p><a target="_blank" href="https://mongoosejs.com/docs/guide.html">MongoDB</a></p>
                      <p><a target="_blank" href="https://angular.io/docs">Angular</a></p>
                    </div>

                  </div>
                </th>
              </tr>
              <tr>
                <th scope="row">
                  <h3 class="text-center" id="Data">Data Definitions</h3>
                  <h5 class="text-center">Data Definitions were generated using JSDoc and are available as static HTML files</h5>
                  <h5 class="text-center"><a target="_blank" href="./admin/out/index.html">Here</a></h5>
                  <p class="text-center">The JSDoc HTML was styled using <a href="https://github.com/braintree/jsdoc-template" target="_blank">this template</a></p>
                  <br />
                </th>
              </tr>
              <tr>
                <th scope="row">
                  <h3 class="text-center" id="Design">Design Rationale</h3>
                  <br />
                  <div class="container">
                    <h4 class="text-center">Platforms</h4>
                    <ul>
                      <li>Node.js</li>
                      <ul>
                        <li>Node.js was our runtime environment for all of our code, html, and styling. With it we were able to
                          serve files, pull in modules as dependencies, and have full creative control over the application building process.
                          We chose it specifically because of its quick learning curve, large community, and scalability for our client.</li>
                      </ul>
                      <br />
                      <li>ExpressJS</li>
                      <ul>
                        <li>ExpressJS is a module for Node.js but it was so crucial to the development of this project that it belongs under this section.
                          With ExpressJS we were able to build our RESTful API on our backend with ease and it allowed us to make larger, complex calls than
                          other API modules.</li>
                      </ul>
                      <br />
                      <li>MongoDB</li>
                      <ul>
                        <li>MongoDB is a non-relational database system that stores entries as "documents" and like documents in "collections". We decided
                          to use MongoDB as our database management system because it stores the documents in objects similar enough to JSON files that they were easily
                          castable. This made interpretting data on our frontend much easier than if we had used a table-based database like SQL.</li>
                      </ul>
                      <br />
                      <li>Angular 7</li>
                      <ul>
                        <li>Angular is a complete frontend framework coded in TypeScript. We decided to use Angular based off of what already comes
                          included in base Angular. With just the base framework, developers can design a high funcitoning frontend, make HTTP requests, and work with
                          authentication and user permissions. The only outside module we needed on our frontend was 'File-Saver' to download PDFs coming from our server as array bitstreams.</li>
                      </ul>
                      <br />
                      <li>Heroku</li>
                      <ul>
                        <li>Heroku is a platform as a service (PaaS) that enables developers to build, run, and operate applications entirely in the cloud. We chose Heroku over AWS
                          after seeing how difficult AWS would really be to get started. Our client OK'd the decision for us early on and it has been easier since. Heroku's main perks include
                          housing MongoDB and SendGrid in their add-ons as well as re-deploying automatically whenever someone pushes to the master branch of our repository.
                        </li>
                      </ul>
                      <br />
                      <li>AWS S3</li>
                      <ul>
                        <li>AWS S3 holds our PDF templates and the user's filled out PDF's. AWS allows us to automatically generate new folders based off of
                          the information we pass it (SuperUser _id and SAQTemplate _id in our case).</li>
                      </ul>
                      <br />
                      <li>SendGrid</li>
                      <ul>
                        <li>SendGrid is a simple email server available as an add-on through Heroku. It allows us to send users emails when they register and allows our client to push emails to all users
                          when there is an update to the SAQ's that needs to be addressed</li>
                      </ul>
                      <br />
                      <li>ZenDesk</li>
                      <ul>
                        <li>ZenDesk is a ticketing system that our client requested we add to the application. It allows users to submit help tickets directly to our client
                          and also allows to client to make a "wiki" containing useful information to aid users in completing SAQ's</li>
                      </ul>
                      <br />
                    </ul>
                    <br />
                    <hr />
                    <h4 class="text-center">Dependencies</h4>
                    <ul>
                      <li>BcryptJS</li>
                      <ul>
                        <li>Bcryptjs is a security node module that allows us to salt and hash our passwords before saving
                          them in our database. We also use it on login as well, we hash the password that comes in on the HTTP request payload
                          and compare it to the salted and hashed password we have stored in the database tied to the user email address</li>
                      </ul>
                      <br />
                      <li>CORS</li>
                      <ul>
                        <li>CORs is a security node module that easily adds request and response headers to our HTTP calls for our server. With it we are able to set domains that are allowed
                          to access our server from a different domain. It also allows us to implement credentials using a cookie-based credential system.</li>
                      </ul>
                      <br />
                      <li>json2xls</li>
                      <ul>
                        <li>Due to limitations of dynamically altering PDFs, we needed to allow users the ability download their supplementary data in another form that could be submitted to their banks. Json2xls is the most popular excel creation
                          library and relatively easy to use. We also had familiarity with it coming in, which made it the best option for us.</li>
                      </ul>
                      <br />
                      <li>AWS-SDK</li>
                      <ul>
                        <li>The AWS-SDK was needed in order to interact with our Amazon S3 bucket for storing and getting filled out SAQ PDFs.</li>
                      </ul>
                      <br />
                      <li>Hummus</li>
                      <ul>
                        <li>HummusJS was used to manipulate the SAQ PDFs from user input. There were some other Node packages for PDF manipulation, such as PDFKit, but as far as we can tell they were unable to alter PDFs that where already created
                          like Hummus can. The creator also wrote a specific utility that allows filling of PDF forms, which was something desperately needed. The library is still supported by its creator, and although the documentation is not the
                          greatest, it was more than enough for what we needed.</li>
                      </ul>
                      <br />
                      <li>RXJS</li>
                      <ul>
                        <li>RXJS comes with the standard Angular 7 Framework but it is too important not to mention. RXJS allows the Angular HTTPClient to
                          work asyncronously based off of a Promise-Observable system where. When a request is made on the frontend it will create a PROMISE in the threads allowing code to keep moving on.
                          When the Promise is complete it becomes an OBSERVABLE where once the requested data comes in, the thread returns immediately to complete subsequent lines of code with that data.</li>
                      </ul>
                      <br />
                      <li>File-Saver</li>
                      <ul>
                        <li>Angular's file saving capabilities work well if the file exists in it's full form on the frontend. However, we were serving our SAQ PDFs in the simplest form we could (octet bitstreams) so File-Saver would convert those
                          back into PDFs and prompt the user to save them locally.</li>
                      </ul>
                      <br />
                      <li>Bootstrap</li>
                      <ul>
                        <li>Bootstrap is a styling dependency that let us quickly put our frontend together with quality layouts and grids. It also comes with Angular components that we used in our design process such as the accordian on
                          the CCW page.</li>
                      </ul>
                      <br />

                    </ul>
                    <br />
                    <hr />
                    <h4 class="text-center">Changes Made</h4>
                    <ul>
                      <li>Hosting</li>
                      <ul>
                        <li>When we originally started this project, we were originally looking to do all of our hosting through AWS. As we started
                          to do more research we realized that would be a bit too complicated for even just a working demo. Professor Terrell advised us that Heroku would be easier
                          to get running so we made the switch and stuck with it. Our client OK'd the decision as well and will find it easier to use than AWS.</li>
                      </ul>
                      <br />
                      <li>User Accounts</li>
                      <ul>
                        <li>In our original design stages, we had SuperUsers and SubUsers being in two different Mongo Schemas to keep them apart, but as we started to
                          design routes and backend calls related to SubUsers we noticed we would have to do every call twice, just slightly differently. We made the
                          decision to combine them into one schema and place a boolean flag "issuper" to determine user priveledges.</li>
                      </ul>
                      <br />
                    </ul>
                    <br />
                  </div>
                </th>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>

</html>
